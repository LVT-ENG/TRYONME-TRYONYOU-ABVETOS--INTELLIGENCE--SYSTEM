name: ğŸ” TRYONYOU â€” FastSync Deploy

on:
  workflow_dispatch:
  schedule:
    - cron: "0 */3 * * *" # cada 3h

jobs:
  deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: ğŸ”§ Checkout repo
        uses: actions/checkout@v4

      - name: âš™ï¸ Setup Node
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: ğŸ“¦ Install dependencies
        run: npm ci

      - name: ğŸ§± Build project
        run: npm run build

      - name: ğŸš€ Deploy to Vercel
        run: npx vercel --prod --yes --token \$VERCEL_TOKEN

      - name: ğŸ“² Notify Telegram
        if: always()
        run: |
          MESSAGE="âœ… TRYONYOU FastSync ejecutado con Ã©xito ğŸš€%0ARepo: \$GITHUB_REPOSITORY%0ACommit: \$GITHUB_SHA%0Aâ° \$(date '+%Y-%m-%d %H:%M:%S')"
          curl -s -X POST https://api.telegram.org/bot\$TELEGRAM_BOT_TOKEN/sendMessage \
          -d chat_id=\$TELEGRAM_CHAT_ID \
          -d text="\$MESSAGE"
