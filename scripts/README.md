# TRYONYOU Scripts

## TRYONYOU_SUPERCOMMIT_MAX.sh

**SCRIPT MAESTRO: Ultimatum V7 Deployment Script**

### Purpose

This script automates the complete deployment workflow for the TRYONYOU platform, including:
- Git synchronization
- Clean dependency installation
- Staging and committing consolidated changes
- Pushing to production
- Optional Vercel deployment

### âš ï¸ Important Warnings

**This script is destructive and will:**
- Delete `node_modules`, `dist`, and legacy folders (`legacy_old`, `temp_old`, `apps/web-old`, `tests-old`, `legacy`, `integrations/duplicados`)
- Force a clean npm installation
- Commit and push changes to the main branch
- Optionally trigger a production deployment

**Ensure your critical code is inside:**
- `src/`
- `public/`
- `api/`
- `docs/`
- `scripts/`

### How to Execute

#### Standard Execution (without Vercel deploy)

```bash
# Make executable (if needed)
chmod +x TRYONYOU_SUPERCOMMIT_MAX.sh

# Run from repository root
./TRYONYOU_SUPERCOMMIT_MAX.sh
```

#### With Vercel Production Deploy

```bash
# Set your Vercel token
export VERCEL_TOKEN=your_token_here

# Run from repository root
./TRYONYOU_SUPERCOMMIT_MAX.sh
```

Or in a single command:

```bash
VERCEL_TOKEN=your_token ./TRYONYOU_SUPERCOMMIT_MAX.sh
```

### What It Does

The script follows this workflow:

1. **Verification** - Checks that package.json exists (ensures you're in repo root)
2. **Git Synchronization** - Switches to main branch and pulls latest changes
3. **Clean & Install (The Purge)** - Removes obsolete files and does fresh npm install
4. **Staging Files (The Consolidation)** - Adds all project files to git staging
5. **The Ultimatum Commit** - Creates comprehensive commit message
6. **Push to Origin** - Pushes changes to origin main
7. **Optional Deploy** - If VERCEL_TOKEN is set, triggers production deployment

### Script Output

The script provides detailed feedback at each stage:

```
ğŸ¦š TRYONYOUâ€“ABVETOSâ€“ULTRAâ€“PLUSâ€“ULTIMATUM â€” SuperCommit MAX
ğŸ“Œ Switching to branch main...
ğŸ“¥ Updating from origin...
ğŸ§¹ Cleaning obsolete files (node_modules, dist, legacy)...
ğŸ“¦ Installing fresh dependencies...
â• Adding files to staging area...
ğŸ’ Creating Consolidated SuperCommit...
ğŸš€ Pushing changes to origin main...
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… SUPERCOMMIT MAX COMPLETE
ğŸŒ Verify live site: https://tryonyou.app
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Commit Message

The script generates a detailed commit message that includes:

```
ğŸ”¥ TRYONYOUâ€“ABVETOSâ€“ULTRAâ€“PLUSâ€“ULTIMATUM

âœ… Consolidated architecture: Avatar3D, TextileComparator, PAU, CAP, ABVET, Wardrobe, AutoDonate, FTT.
âœ… Integrated Deploy Express + CI/CD (Vercel + Telegram).
âœ… Clean merge of all legacy repositories into unified monorepo.
âœ… Verified ABVET endpoints and PAU recommender.
âœ… Project fully aligned with EPCT patent, production-ready build.

ğŸŒ Domain: tryonyou.app (Vercel + Cloudflare SSL Strict)
ğŸ”— Notifications: @abvet_deploy_bot
ğŸ’ Commit generated by Agente 70 â€” SuperCommit MAX

This commit represents the final integration of all TRYONYOU subsystems into a unified, production-ready platform.
```

### Error Handling

The script includes error handling for:
- Missing package.json (exits with error)
- Failed git checkout (continues with current branch)
- Failed git pull (continues, useful for first push)
- Missing directories (warns but continues)
- No changes to commit (warns but continues)

### Prerequisites

- Git installed and configured
- Node.js and npm installed
- Repository cloned and accessible
- Write permissions to the repository
- (Optional) Vercel CLI installed via npm (script will use npx)
- (Optional) VERCEL_TOKEN environment variable for automatic deployment

### Troubleshooting

**Script won't run:**
```bash
chmod +x TRYONYOU_SUPERCOMMIT_MAX.sh
```

**Not in repository root:**
```
âŒ Error: This script must be run from the repository root.
```
Solution: Navigate to the repository root directory

**Git conflicts:**
The script will attempt to pull changes. If there are conflicts, resolve them manually before running the script again.

**Vercel deployment fails:**
Ensure:
- Vercel CLI is available (script uses npx)
- VERCEL_TOKEN is valid and has appropriate permissions
- Project is properly configured in Vercel

### Related Files

- Main script: `/TRYONYOU_SUPERCOMMIT_MAX.sh` (root directory)
- Copy: `/scripts/TRYONYOU_SUPERCOMMIT_MAX.sh` (scripts directory)
- Documentation: `/DEPLOYMENT_CHECKLIST.md`
- CI/CD: `.github/workflows/schedule_deploy.yml`

### Support

For issues or questions:
- Check the deployment checklist: `DEPLOYMENT_CHECKLIST.md`
- Review GitHub Actions logs in the repository
- Verify Vercel deployment status at https://vercel.com
- Check live site: https://tryonyou.app
